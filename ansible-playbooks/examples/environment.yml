---
- hosts: localhost
  gather_facts: no

  tasks:
      - name: "Enable gregw/i3desktop repo"
        become: yes
        command: dnf copr enable gregw/i3desktop -y
        register: output
      - debug:
          var: output.stdout_lines

      - name: Install packages
        become: yes
        dnf:
            name:
                - ImageMagick
                # - SDL2-devel
                # - SDL2_image-devel
                # - SDL2_mixer-devel
                # - SDL2_net-devel
                # - SDL2_ttf-devel
                - arandr
                - clang
                - clang-tools-extra
                - cmake
                - ctags
                # - dmenu
                - feh
                - gcc-g++
                - htop
                - i3-gaps
                - i3lock
                - i3status
                - network-manager-applet
                - ninja-build
                - openvpn
                - redshift
                - rofi
                - rxvt-unicode-256color
                - scrot
                # - tiled
                # - tlp
                # - tlp-rdw
                # - valgrind
                - vim-enhanced
                - xbacklight
                - xclip
                - xrandr
                - zsh
            state: present

      - name: Upgrade all packages
        become: yes
        dnf:
            name: "*"
            state: latest

      # - name: Autoremove unneeded packages
      #   become: yes
      #   dnf:
      #       autoremove: yes

      # - name: "List {{ user }} home directory"
      #   become: yes
      #   become_user: "{{ user }}"
      #   command: ls -al ~
      #   register: output
      # - debug:
      #     var: output.stdout_lines
